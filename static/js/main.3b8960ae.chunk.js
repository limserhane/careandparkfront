(this.webpackJsonpcareandparkfront=this.webpackJsonpcareandparkfront||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(13),i=n.n(a),s=(n(18),n(6)),o=n(7),l=n(9),u=n(8),j=(n(19),n(20),"http://localhost:8080"),h=n(2),b=n(5),p=n(0);var d=function(e){var t=Object(h.h)().id;return Object(p.jsxs)("div",{className:"header-container",children:[Object(p.jsx)(b.b,{to:"/",className:"link",children:Object(p.jsx)("h1",{className:"title",children:"Care And Park"})}),Object(p.jsx)(b.b,{to:"/parkings",className:"sublink link",children:"Parkings"}),Object(p.jsx)("a",{href:j,target:"_blank",rel:"noreferrer",className:"sublink link",children:"API"}),Object(p.jsx)(b.b,{to:"/parkings/new",className:"sublink link",children:"Nouveau parking"}),t&&Object(p.jsx)(b.b,{to:"/parkings/"+t+"/places/new",className:"sublink link",children:"Nouvelle place"})]})},f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"app-container",children:[Object(p.jsx)(d,{}),Object(p.jsx)(h.a,{})]})}}]),n}(r.a.Component),O=f,m=n(3),g=(n(22),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={parkings:[]},c.chargerParkings=c.chargerParkings.bind(Object(m.a)(c)),c}return Object(o.a)(n,[{key:"chargerParkings",value:function(){var e=this;fetch(j+"/parkings").then((function(t){t.ok?t.json().then((function(t){e.setState({parkings:t})})):console.log(t)})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.chargerParkings()}},{key:"render",value:function(){return Object(p.jsx)("ul",{className:"parkings-container",children:this.state.parkings.map((function(e){return Object(p.jsx)("li",{className:"parking",children:Object(p.jsxs)(b.b,{to:e.id.toString(),className:"link",children:[e.nom,", ",e.adresse]})},e.id)}))})}}]),n}(r.a.Component)),v=(n(23),n(24),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={compteur:0},c.id=c.props.id,c.chargerCompteur=c.chargerCompteur.bind(Object(m.a)(c)),c.modifierCompteur=c.modifierCompteur.bind(Object(m.a)(c)),c}return Object(o.a)(n,[{key:"chargerCompteur",value:function(){var e=this;fetch(j+"/parkings/"+this.id+"/compteur").then((function(t){t.ok?t.json().then((function(t){e.setState({compteur:t})})):console.log(t)})).catch((function(e){console.log(e)}))}},{key:"modifierCompteur",value:function(e){var t=this,n=new Request(j+"/parkings/"+this.id+"/compteur/"+e,{method:"POST"});fetch(n).then((function(e){e.ok?e.json().then((function(e){t.setState({compteur:e})})):409===e.status?(alert("Impossible d'enregistrer une sortie"),t.setState({compteur:0})):console.log(e)})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.chargerCompteur()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"compteur-container",children:[Object(p.jsxs)("p",{className:"compteur",children:["Nombre de v\xe9hicules : ",this.state.compteur]}),Object(p.jsx)("button",{className:"bouton recharger",onClick:function(){return e.chargerCompteur()},children:"Recharger"}),Object(p.jsx)("button",{className:"bouton sortie",onClick:function(){return e.modifierCompteur("sortie")},children:"Sortie"}),Object(p.jsx)("button",{className:"bouton entree",onClick:function(){return e.modifierCompteur("entree")},children:"Entr\xe9e"})]})}}]),n}(r.a.Component)),k=(n(25),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={error:null},c.id=c.props.id,c.parking={},c.chargerInformations=c.chargerInformations.bind(Object(m.a)(c)),c}return Object(o.a)(n,[{key:"chargerInformations",value:function(){var e=this;fetch(j+"/parkings/"+this.id).then((function(t){t.ok&&t.json().then((function(t){e.parking=t,e.setState({error:null})}))})).catch((function(t){e.setState({error:t})}))}},{key:"componentDidMount",value:function(){this.chargerInformations()}},{key:"render",value:function(){return this.state.error?Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Erreur lors du chargement des informations"}),Object(p.jsx)("p",{children:JSON.stringify(this.state.error)})]}):Object(p.jsxs)("div",{className:"informations-container",children:[Object(p.jsx)("h2",{className:"nom",children:this.parking.nom||"?"}),Object(p.jsx)("p",{className:"adresse",children:this.parking.adresse||"?"})]})}}]),n}(r.a.Component)),x=(n(26),n(27),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={libre:!1},c.id=c.props.id,c.numero=c.props.numero,c.type="",c.chargerPlace=c.chargerPlace.bind(Object(m.a)(c)),c.modifierDisponibilite=c.modifierDisponibilite.bind(Object(m.a)(c)),c}return Object(o.a)(n,[{key:"chargerPlace",value:function(){var e=this;fetch(j+"/parkings/"+this.id+"/places/"+this.numero).then((function(t){t.ok?t.json().then((function(t){e.type=t.type,e.setState({libre:"LIBRE"===t.etat})})):console.log(t)})).catch((function(e){console.log(e)}))}},{key:"modifierDisponibilite",value:function(e){var t=this,n=new Request(j+"/parkings/"+this.id+"/places/"+this.numero,{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({etat:e})});fetch(n).then((function(e){e.ok?e.json().then((function(e){t.setState({libre:"LIBRE"===e.etat})})):409===e.status?(alert("La place est d\xe9j\xe0 occup\xe9e"),t.setState({libre:!1})):console.log(e)})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.chargerPlace()}},{key:"render",value:function(){var e=this,t=this.state.libre?"libre":"occupe";return Object(p.jsxs)("button",{onClick:function(){return e.modifierDisponibilite(e.state.libre?"OCCUPE":"LIBRE")},className:"place-container",children:[Object(p.jsxs)("p",{className:"place-numero",children:[" N\xb0 ",this.numero.toString()||"?"]}),Object(p.jsx)("p",{className:"place-type",children:this.type.toString()||"?"}),Object(p.jsx)("div",{className:"pastille "+t})]})}}]),n}(r.a.Component)),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={places:[]},c.id=c.props.id,c.chargerPlaces=c.chargerPlaces.bind(Object(m.a)(c)),c}return Object(o.a)(n,[{key:"chargerPlaces",value:function(){var e=this;fetch(j+"/parkings/"+this.id+"/places").then((function(t){t.ok?t.json().then((function(t){e.setState({places:t})})):console.log(t)})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.chargerPlaces()}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"places-container",children:this.state.places.map((function(t){return Object(p.jsx)(x,{id:e.id,numero:t.numero},e.id.toString()+t.numero.toString())}))})}}]),n}(r.a.Component);var y=function(e){var t=Object(h.h)().id;return Object(p.jsxs)("div",{className:"parking-container",children:[Object(p.jsx)(k,{id:t}),Object(p.jsx)(v,{id:t}),Object(p.jsx)(N,{id:t})]})},S=n(10);n(28);var C=function(e){var t=Object(c.useState)(""),n=Object(S.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=Object(S.a)(i,2),o=s[0],l=s[1],u=Object(h.g)();return Object(p.jsxs)("div",{className:"nouveauparking-container",children:[Object(p.jsx)("h2",{className:"title",children:"Nouveau parking"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new Request(j+"/parkings/",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({nom:r,adresse:o})});fetch(t).then((function(e){e.ok?e.json().then((function(e){u("/parkings/"+e.id)})):400===e.status?alert("Le nom et l'adresse doivent \xeatre renseign\xe9es"):console.log(e)})).catch((function(e){console.log(e)}))},className:"formulaire",children:[Object(p.jsxs)("label",{children:["Nom du parking",Object(p.jsx)("input",{type:"text",required:!0,value:r,onChange:function(e){a(e.target.value)}})]}),Object(p.jsxs)("label",{children:["Adresse du parking",Object(p.jsx)("input",{type:"text",required:!0,value:o,onChange:function(e){l(e.target.value)}})]}),Object(p.jsx)("input",{type:"submit",value:"Cr\xe9er"})]})]})};n(29);var P=function(e){var t=Object(h.h)().id,n=Object(c.useState)(0),r=Object(S.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(""),o=Object(S.a)(s,2),l=o[0],u=o[1];function b(e){e.preventDefault();var n=e.target.files[0],c=new FileReader;c.onloadend=function(e){var n=JSON.parse(c.result);n.places&&Array.isArray(n.places)||alert("Le fichier n'est pas au bon format"),n.places.forEach((function(e){var n=new Request(j+"/parkings/"+t+"/places",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({numero:e.numero,type:e.type})});fetch(n).then((function(e){e.ok?e.json().then((function(e){console.log(e)})):console.log(e)})).catch((function(e){console.log(e)}))}))},c.readAsText(n)}return Object(p.jsxs)("div",{className:"nouvelleplace-container",children:[Object(p.jsx)("h2",{className:"title",children:"Nouvelle place"}),Object(p.jsxs)("form",{onSubmit:function(e){e&&e.preventDefault();var n=new Request(j+"/parkings/"+t+"/places",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({numero:a,type:l})});fetch(n).then((function(e){e.ok?e.json().then((function(e){i(0),u(""),alert("Place "+e.numero+" cr\xe9\xe9")})):console.log(e)})).catch((function(e){console.log(e)}))},className:"formulaire",children:[Object(p.jsxs)("label",{children:["Num\xe9ro de la place",Object(p.jsx)("input",{type:"number",required:!0,value:a,onChange:function(e){i(e.target.value)}})]}),Object(p.jsxs)("label",{children:["Type de place",Object(p.jsxs)("select",{required:!0,value:l,onChange:function(e){u(e.target.value)},children:[Object(p.jsx)("option",{value:""}),Object(p.jsx)("option",{value:"NOMINALE",children:"Nominale"}),Object(p.jsx)("option",{value:"HANDICAPE",children:"Handicape"}),Object(p.jsx)("option",{value:"DEUX_ROUES",children:"Deux roues"}),Object(p.jsx)("option",{value:"BUS",children:"Bus"})]})]}),Object(p.jsx)("input",{type:"submit",value:"Cr\xe9er ou mettre \xe0 jour"})]}),Object(p.jsx)("hr",{className:"solid"}),Object(p.jsx)("form",{children:Object(p.jsxs)("label",{children:["Fichier JSON \xe0 charger",Object(p.jsx)("input",{type:"file",onChange:function(e){b(e)}})]})})]})};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(b.a,{basename:"/careandparkfront",children:Object(p.jsx)(h.d,{children:Object(p.jsxs)(h.b,{path:"/",element:Object(p.jsx)(O,{}),children:[Object(p.jsx)(h.b,{path:"parkings",element:Object(p.jsx)(g,{})}),Object(p.jsx)(h.b,{path:"parkings/:id",element:Object(p.jsx)(y,{})}),Object(p.jsx)(h.b,{path:"parkings/:id/places/new",element:Object(p.jsx)(P,{})}),Object(p.jsx)(h.b,{path:"parkings/new",element:Object(p.jsx)(C,{})})]})})})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.3b8960ae.chunk.js.map