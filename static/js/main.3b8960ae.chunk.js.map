{"version":3,"sources":["Utils/api.js","Components/Header/index.js","Components/App/index.js","Components/Parkings/index.js","Components/Compteur/index.js","Components/ParkingInformations/index.js","Components/Place/index.js","Components/Places/index.js","Components/Parking/index.js","Components/NouveauParking/index.js","Components/NouvellePlace/index.js","index.js"],"names":["url","Header","props","id","useParams","className","to","href","api","target","rel","App","React","Component","Parkings","state","parkings","chargerParkings","bind","fetch","then","response","ok","json","data","setState","console","log","catch","error","this","map","parking","toString","nom","adresse","Compteur","compteur","chargerCompteur","modifierCompteur","modification","request","Request","method","status","alert","onClick","ParkingInformations","chargerInformations","JSON","stringify","Place","libre","numero","type","chargerPlace","modifierDisponibilite","etat","headers","body","disponibilite","Places","places","chargerPlaces","place","Parking","NouveauParking","useState","setNom","setAdresse","navigate","useNavigate","onSubmit","event","preventDefault","required","value","onChange","NouvellePlace","setNumero","setType","chargerFichier","fichier","files","reader","FileReader","onloadend","e","parse","result","Array","isArray","forEach","readAsText","ReactDOM","render","StrictMode","basename","path","element","document","getElementById"],"mappings":"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","file":"static/js/main.3b8960ae.chunk.js","sourcesContent":["\nexport const url = \"http://localhost:8080\";\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\nimport {NavLink, useParams} from \"react-router-dom\"\n\nfunction Header(props) {\n\n\tlet {id} = useParams();\n\n\treturn (\n\t\t<div className=\"header-container\">\n\t\t\t<NavLink to=\"/\" className=\"link\"><h1 className=\"title\">Care And Park</h1></NavLink>\n\t\t\t<NavLink to=\"/parkings\" className=\"sublink link\">Parkings</NavLink>\n\t\t\t<a href={api.url} target=\"_blank\" rel=\"noreferrer\" className=\"sublink link\">API</a>\n\t\t\t<NavLink to=\"/parkings/new\" className=\"sublink link\">Nouveau parking</NavLink>\n\t\t\t{id && <NavLink to={\"/parkings/\"+id+\"/places/new\"} className=\"sublink link\">Nouvelle place</NavLink>}\n\t\t</div>\n\t);\n}\n\nexport default Header;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport Header from \"../Header\"\n\nimport { Outlet } from \"react-router-dom\";\n\nclass App extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"app-container\">\n\t\t\t\t<Header />\n\t\t\t\t<Outlet />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\nimport {NavLink} from \"react-router-dom\";\n\nclass Parkings extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tparkings: []\n\t\t}\n\n\t\tthis.chargerParkings = this.chargerParkings.bind(this)\n\t}\n\t\n\tchargerParkings() {\n\t\t\n\t\tfetch(api.url+\"/parkings\")\n\t\t.then( (response) => {\n\t\t\tif(response.ok) { response.json().then( (data) => {\n\t\t\t\t\tthis.setState({parkings: data})\n\t\t\t})}\n\t\t\telse {\n\t\t\t\tconsole.log(response)\n\t\t\t}\n\t\t})\n\t\t.catch( (error) => {\n\t\t\tconsole.log(error)\n\t\t})\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.chargerParkings()\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<ul className=\"parkings-container\">\n\t\t\t\t{this.state.parkings.map(parking => \n\t\t\t\t\t<li key={parking.id} className=\"parking\">\n\t\t\t\t\t\t<NavLink to={parking.id.toString()} className=\"link\">{parking.nom}, {parking.adresse}</NavLink>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t</ul>\n\t\t);\n\t}\n}\n\nexport default Parkings;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\n\nclass Compteur extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            compteur: 0,\n        }\n\n        this.id = this.props.id\n\n        this.chargerCompteur = this.chargerCompteur.bind(this)\n        this.modifierCompteur = this.modifierCompteur.bind(this)\n    }\n\n\n    chargerCompteur() {\n\n        fetch(api.url+\"/parkings/\"+this.id+\"/compteur\")\n        .then( (response) => {\n            if(response.ok) { response.json().then( (data) => {\n                this.setState({compteur: data})\n            })}\n            else {\n                console.log(response)\n            }\n        })\n        .catch( (error) => {\n            console.log(error)\n        })\n    }\n\n\n    modifierCompteur(modification) {\n        const request = new Request(api.url+\"/parkings/\"+this.id+\"/compteur/\"+modification, {\n            method: \"POST\"\n        })\n\n        fetch(request)\n        .then( (response) => {\n            if(response.ok) { response.json().then( (data) => {\n                this.setState({compteur: data})\n            })}\n            else {\n                if(response.status === 409) {\n                    alert(\"Impossible d'enregistrer une sortie\")\n                    this.setState({compteur: 0})\n                }\n                else {\n                    console.log(response)\n                }\n            }\n        })\n        .catch( (error) => {\n            console.log(error)\n        })\n\n    }\n\n    componentDidMount() {\n        this.chargerCompteur()\n    }\n\n    render() {\n\n        return (\n            <div className=\"compteur-container\">\n                <p className=\"compteur\">Nombre de véhicules : {this.state.compteur}</p>\n                <button className=\"bouton recharger\" onClick={() => this.chargerCompteur()}>Recharger</button>\n                <button className=\"bouton sortie\" onClick={() => this.modifierCompteur(\"sortie\")}>Sortie</button>\n                <button className=\"bouton entree\" onClick={() => this.modifierCompteur(\"entree\")}>Entrée</button>\n            </div>\n        );\n    }\n}\n\nexport default Compteur;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\n\nclass ParkingInformations extends React.Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            error: null\n        }\n\n        this.id = this.props.id\n\n        this.parking = {};\n\n        this.chargerInformations = this.chargerInformations.bind(this)\n    }\n\n    chargerInformations() {\n\n        fetch(api.url+\"/parkings/\"+this.id)\n        .then( (response) => {\n            if(response.ok) { response.json().then( (data) => {\n                    this.parking = data\n                    this.setState({error: null})\n            })}\n            else {\n                // reponse not ok\n            }\n        })\n        .catch( (error) => {\n            this.setState({error: error})\n        })\n    }\n\n    componentDidMount() {\n        this.chargerInformations()\n    }\n    \n    render() {\n        if(this.state.error) {\n            return (\n                <div>\n                    <p>Erreur lors du chargement des informations</p>\n                    <p>{JSON.stringify(this.state.error)}</p>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"informations-container\">\n                <h2 className=\"nom\">{this.parking.nom || \"?\"}</h2>\n                <p className=\"adresse\">{this.parking.adresse || \"?\"}</p>\n            </div>\n        );\n    }\n}\n\nexport default ParkingInformations;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\nclass Place extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tlibre: false\n\t\t}\n\n\t\tthis.id = this.props.id;\n\t\tthis.numero = this.props.numero;\n\n\t\tthis.type = \"\"\n\n        this.chargerPlace = this.chargerPlace.bind(this)\n        this.modifierDisponibilite = this.modifierDisponibilite.bind(this)\n\t}\n\n    chargerPlace() {\n\n        fetch(api.url+\"/parkings/\"+this.id+\"/places/\"+this.numero)\n        .then( (response) => {\n            if(response.ok) { response.json().then( (data) => {\n                this.type = data.type\n\t\t\t\tthis.setState({libre: data.etat === \"LIBRE\"})\n            })}\n            else {\n                console.log(response)\n            }\n        })\n        .catch( (error) => {\n            console.log(error)\n        })\n    }\n\n    modifierDisponibilite(modification) {\n    \n        const request = new Request(api.url+\"/parkings/\"+this.id+\"/places/\"+this.numero, {\n            method: \"PUT\",\n            headers: {\n                'Content-type': 'application/json; charset=UTF-8' \n            },\n\t\t\tbody: JSON.stringify({\n\t\t\t\tetat: modification\n\t\t\t})\n        })\n\n        fetch(request)\n        .then( (response) => {\n            if(response.ok) { response.json().then( (data) => {\n                this.setState({libre: data.etat === \"LIBRE\"})\n            })}\n            else {\n                if(response.status === 409) {\n                    alert(\"La place est déjà occupée\")\n                    this.setState({libre: false})\n                }\n                else {\n                    console.log(response)\n                }\n            }\n        })\n        .catch( (error) => {\n            console.log(error)\n        })\n\n    }\n\n\tcomponentDidMount() {\n\t\tthis.chargerPlace()\n\t}\n\n\trender() {\n\n\t\tconst disponibilite = this.state.libre ? \"libre\" : \"occupe\"\n\n\t\treturn (\n\t\t\t<button onClick={() => this.modifierDisponibilite(this.state.libre ? \"OCCUPE\" : \"LIBRE\")} className=\"place-container\">\n\t\t\t\t<p className=\"place-numero\"> N° {this.numero.toString() || \"?\"}</p>\n\t\t\t\t<p className=\"place-type\">{this.type.toString() || \"?\"}</p>\n\t\t\t\t<div className={ \"pastille \" + disponibilite} />\n\t\t\t</button>\n\t\t);\n\t}\n}\n\nexport default Place;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\nimport Place from \"../Place\";\n\nclass Places  extends React.Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            places: []\n        }\n\n        this.id = this.props.id\n\n        this.chargerPlaces = this.chargerPlaces.bind(this)\n    }\n\n    chargerPlaces() {\n\t\t\n\t\tfetch(api.url+\"/parkings/\"+this.id+\"/places\")\n\t\t.then( (response) => {\n\t\t\tif(response.ok) { response.json().then( (data) => {\n\t\t\t\t\tthis.setState({places: data})\n\t\t\t})}\n\t\t\telse {\n\t\t\t\tconsole.log(response)\n\t\t\t}\n\t\t})\n\t\t.catch( (error) => {\n\t\t\tconsole.log(error)\n\t\t})\n    }\n\n    componentDidMount() {\n        this.chargerPlaces()\n    }\n\n    render() {\n        return (\n            <div className=\"places-container\">\n                {(this.state.places.map((place) => <Place key={this.id.toString()+place.numero.toString()} id={this.id} numero={place.numero} />))}\n            </div>\n        );\n    }\n}\n\nexport default Places;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nimport Compteur from \"../Compteur\";\nimport ParkingInformations from \"../ParkingInformations\";\nimport Places from \"../Places\";\n\nimport { useParams } from \"react-router-dom\";\n\nfunction Parking(props) {\n    const {id} = useParams();\n\n\treturn (\n        <div className=\"parking-container\">\n            <ParkingInformations id={id}/>\n            <Compteur id={id}/>\n            <Places id={id}/>\n        </div>\n\t);\n}\n\nexport default Parking;\n","import React, { useState } from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\nimport {useNavigate} from \"react-router-dom\"\n\nfunction NouveauParking (props) {\n\n    const [nom, setNom] = useState(\"\");\n    const [adresse, setAdresse] = useState(\"\");\n\n    let navigate = useNavigate();\n\n    function envoyer(event) {\n        event.preventDefault();\n    \n        const request = new Request(api.url+\"/parkings/\", {\n            method: \"POST\",\n            headers: {\n                'Content-type': 'application/json; charset=UTF-8' \n            },\n\t\t\tbody: JSON.stringify({\n\t\t\t\tnom: nom,\n                adresse: adresse\n\t\t\t})\n        })\n\n        fetch(request)\n        .then( (response) => {\n            if(response.ok) { response.json().then( (data) => {\n                navigate(\"/parkings/\"+data.id)\n            })}\n            else {\n                if(response.status === 400) {\n                    alert(\"Le nom et l'adresse doivent être renseignées\")\n                }\n                else {\n                    console.log(response)\n                }\n            }\n        })\n        .catch( (error) => {\n            console.log(error)\n        })\n    }\n\n    return (\n        <div className=\"nouveauparking-container\">\n            <h2 className=\"title\">Nouveau parking</h2>\n            <form onSubmit={envoyer} className=\"formulaire\">\n                <label>Nom du parking\n                    <input type=\"text\" required value={nom} onChange={(event => {setNom(event.target.value)})}/>\n                </label>\n                <label>Adresse du parking\n                    <input type=\"text\" required value={adresse} onChange={(event => {setAdresse(event.target.value)})}/>\n                </label>\n                <input type=\"submit\" value=\"Créer\" />\n            </form>\n        </div>\n\n    );\n}\n\nexport default NouveauParking;\n","import React, { useState } from \"react\";\n\nimport \"./style.css\";\n\nimport * as api from \"../../Utils/api\"\n\nimport { useParams} from \"react-router-dom\";\n\nfunction NouvellePlace (props) {\n\n    const {id} = useParams();\n\n    const [numero, setNumero] = useState(0);\n    const [type, setType] = useState(\"\");\n\n    function envoyer(event) {\n        if(event) event.preventDefault();\n    \n        const request = new Request(api.url+\"/parkings/\"+id+\"/places\", {\n            method: \"POST\",\n            headers: {\n                'Content-type': 'application/json; charset=UTF-8' \n            },\n\t\t\tbody: JSON.stringify({\n\t\t\t\tnumero: numero,\n                type: type\n\t\t\t})\n        })\n\n        fetch(request)\n        .then( (response) => {\n            if(response.ok) { response.json().then( (data) => {\n                setNumero(0)\n                setType(\"\")\n                alert(\"Place \"+data.numero+\" créé\")\n            })}\n            else {\n                console.log(response)\n            }\n        })\n        .catch( (error) => {\n            console.log(error)\n        })\n    }\n\n    function chargerFichier(event) {\n        event.preventDefault()\n        \n        const fichier = event.target.files[0]\n\n        let reader = new FileReader();\n        reader.onloadend = (e) => {\n            let data = JSON.parse(reader.result)\n\n            if(!data.places || !Array.isArray(data.places)) {\n                alert(\"Le fichier n'est pas au bon format\")\n            }\n\n            envoyerPlaces(data.places)\n\n        }\n\n        reader.readAsText(fichier)\n    }\n\n    function envoyerPlaces(places) {\n        places.forEach(place => {\n                \n            const request = new Request(api.url+\"/parkings/\"+id+\"/places\", {\n                method: \"POST\",\n                headers: {\n                    'Content-type': 'application/json; charset=UTF-8' \n                },\n                body: JSON.stringify({\n                    numero: place.numero,\n                    type: place.type\n                })\n            })\n    \n            fetch(request)\n            .then( (response) => {\n                if(response.ok) { response.json().then( (data) => {\n                    console.log(data)\n                })}\n                else {\n                    console.log(response)\n                }\n            })\n            .catch( (error) => {\n                console.log(error)\n            })\n\n        });\n\n        // navigate(\"/parkings/\"+id, {replace:true})\n    }\n\n    return (\n        <div className=\"nouvelleplace-container\">\n            <h2 className=\"title\">Nouvelle place</h2>\n            <form onSubmit={envoyer} className=\"formulaire\">\n                <label>Numéro de la place\n                    <input type=\"number\" required value={numero} onChange={(event => {setNumero(event.target.value)})}/>\n                </label>\n                <label>Type de place\n                    <select required value={type} onChange={(event => {setType(event.target.value)})}>\n                        <option value=\"\"></option>\n                        <option value=\"NOMINALE\">Nominale</option>\n                        <option value=\"HANDICAPE\">Handicape</option>\n                        <option value=\"DEUX_ROUES\">Deux roues</option>\n                        <option value=\"BUS\">Bus</option>\n                    </select>\n                </label>\n                <input type=\"submit\" value=\"Créer ou mettre à jour\" />\n            </form>\n            <hr className=\"solid\"/>\n            <form >\n                <label>Fichier JSON à charger\n                    <input type=\"file\" onChange={(event)=>{chargerFichier(event)}}/>\n                </label>\n            </form>\n\n        </div>\n\n    );\n}\n\nexport default NouvellePlace;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './style.css';\n\nimport App from './Components/App';\nimport Parkings from \"./Components/Parkings\"\nimport Parking from \"./Components/Parking\"\nimport NouveauParking from \"./Components/NouveauParking\"\nimport NouvellePlace from './Components/NouvellePlace';\n\nimport { BrowserRouter, Route, Routes } from 'react-router-dom';\n\nReactDOM.render(\n<React.StrictMode>\n\t<BrowserRouter basename=\"/careandparkfront\">\n\t\t<Routes>\n\t\t\t<Route path=\"/\" element={<App />} >\n\t\t\t\t{/* NO INDEX = blank home */}\n\t\t\t\t<Route path=\"parkings\" element={<Parkings/>} />\n\t\t\t\t<Route path=\"parkings/:id\" element={<Parking />} />\n\t\t\t\t<Route path=\"parkings/:id/places/new\" element={<NouvellePlace />} />\n\t\t\t\t<Route path=\"parkings/new\" element={<NouveauParking />} />\n\t\t\t</Route>\n\t\t</Routes>\n\t</BrowserRouter>\n</React.StrictMode>,\ndocument.getElementById('root')\n);"],"sourceRoot":""}